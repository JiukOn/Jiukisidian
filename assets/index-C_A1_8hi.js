var X=Object.defineProperty;var K=(t,i,n)=>i in t?X(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n;var P=(t,i,n)=>K(t,typeof i!="symbol"?i+"":i,n);import{j as e,r as h,$ as Y,a0 as _,a1 as z,a2 as Z,a3 as Q,a4 as ee,a5 as T,a6 as te,a7 as ie,a8 as O,a9 as ne,aa as se,ab as ae,ac as oe,ad as re,ae as $,af as M,ag as le,ah as ce,ai as de,aj as ue,ak as R,al as pe,am as xe,an as he,ao as ge,ap as me,R as L,aq as H,ar as je,as as fe,at as be,au as ye,av as ke,aw as ve,ax as we,ay as Se,az as I,aA as A,aB as F,aC as Ce,aD as Ne,aE as Pe,aF as Ie,aG as ze,aH as W,aI as G,aJ as De,aK as Re,aL as Ee,aM as Me,aN as Le,aO as Te,aP as Oe,aQ as Ae,aR as Fe}from"./vendor-Cv8oAqTQ.js";import{S as Ue,R as Be,H as $e,u as D,c as U,A as He,t as J,D as We,a as Ge,b as Je,d as qe,e as Ve,f as Xe,T as Ke}from"./tldraw-DmOLxkNK.js";import{u as Ye,S as _e,T as Ze,C as Qe,a as et,E as tt}from"./tiptap-uxHYgwHk.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class q extends Ue{constructor(){super(...arguments);P(this,"canResize",()=>!0)}getDefaultProps(){return{w:350,h:400,text:"<h2>Novo Card</h2><p>Digite aqui...</p>"}}getGeometry(n){return new Be({width:n.props.w,height:n.props.h,isFilled:!0})}onResize(n,l){return{props:{w:Math.max(200,l.initialShape.props.w*l.scaleX),h:Math.max(150,l.initialShape.props.h*l.scaleY)}}}component(n){return e.jsx($e,{style:{pointerEvents:"all"},children:e.jsx(it,{id:n.id,text:n.props.text})})}indicator(n){return e.jsx("rect",{width:n.props.w,height:n.props.h})}}P(q,"type","obsidian-note");const it=({id:t,text:i})=>{const n=D(),l=h.useCallback(o=>{n.updateShape({id:t,type:"obsidian-note",props:{text:o}})},[n,t]),s=Ye({extensions:[_e,Ze,Qe,et.configure({types:["heading","paragraph"]})],content:i,onUpdate:({editor:o})=>l(o.getHTML()),editorProps:{attributes:{class:"prose prose-invert",style:"height: 100%; color: #f4f4f5; outline: none; font-family: Inter, sans-serif; line-height: 1.6;"}}});return h.useEffect(()=>{if(!s)return;const o=a=>{if(a.detail.id!==t)return;const{action:u,value:d}=a.detail,r=s.chain().focus();switch(u){case"bold":r.toggleBold().run();break;case"italic":r.toggleItalic().run();break;case"h1":r.toggleHeading({level:1}).run();break;case"h2":r.toggleHeading({level:2}).run();break;case"list":r.toggleBulletList().run();break;case"align":r.setTextAlign(d).run();break;case"color":r.setColor(d).run();break;case"emoji":r.insertContent(d).run();break}};return window.addEventListener("jiuk-editor-action",o),()=>window.removeEventListener("jiuk-editor-action",o)},[s,t]),s?e.jsxs("div",{className:"obsidian-card",style:{width:"100%",height:"100%"},children:[e.jsxs("div",{className:"obsidian-header",children:[e.jsx("div",{className:"circle-btn",style:{background:"#a855f7",boxShadow:"0 0 8px rgba(168, 85, 247, 0.4)"}}),e.jsx("div",{className:"circle-btn",style:{background:"#fb7185"}}),e.jsx("div",{className:"circle-btn",style:{background:"#fde047"}}),e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#a1a1aa",fontWeight:600,letterSpacing:"0.02em"},children:"Jiukisidian Note"})]}),e.jsx("div",{style:{flex:1,padding:"16px",overflowY:"auto",cursor:"text"},onPointerDown:o=>o.stopPropagation(),onDoubleClick:o=>o.stopPropagation(),children:e.jsx(tt,{editor:s})})]}):null},v={exportCanvas:async(t,i)=>{const n=t.getSelectedShapeIds(),l=n.length>0?n:Array.from(t.getCurrentPageShapeIds());if(l.length!==0)try{if(i==="json"){const u=t.getSnapshot(),d=JSON.stringify(u,null,2),r=new Blob([d],{type:"application/json"});E(r,"jiukisidian-project.json");return}const s=await t.getSvg(l,{scale:2,background:!0});if(!s)throw new Error("Falha ao gerar SVG");if(i==="pdf"){alert("ExportaÃ§Ã£o direta para PDF requer biblioteca externa. Exportando como PNG.");const u=await B(s,"image/png");u&&E(u,"jiukisidian-export.png");return}const a=await B(s,i==="jpg"?"image/jpeg":"image/png");a&&E(a,`jiukisidian-export.${i}`)}catch(s){console.error(s),alert("NÃ£o foi possÃ­vel exportar o arquivo.")}},handleImageUpload:(t,i)=>{if(!i)return;if(!i.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}const n=new FileReader;n.onload=async()=>{const l=He.createId(),s=U(),o=t.getViewportScreenCenter(),a=new Image;a.src=n.result,a.onload=()=>{t.createAssets([{id:l,typeName:"asset",type:"image",props:{name:i.name,src:n.result,w:a.width,h:a.height,mimeType:i.type,isAnimated:!1},meta:{}}]),t.createShape({id:s,type:"image",x:o.x-a.width/2,y:o.y-a.height/2,props:{assetId:l,w:a.width,h:a.height}})}},n.readAsDataURL(i)},setTheme:(t,i)=>{const n=i==="light"?"light":"dark";t.user.updateUserPreferences({colorScheme:n}),document.body.setAttribute("data-theme",i),i==="jiuk"?document.documentElement.style.setProperty("--primary","#a855f7"):i==="dark"&&document.documentElement.style.setProperty("--primary","#3b82f6")},setUiScale:t=>{document.documentElement.style.setProperty("--ui-icon-size",`${t}px`)},toggleReducedMotion:t=>{const n=t.user.getAnimationSpeed()===0?1:0;return t.user.updateUserPreferences({animationSpeed:n}),n===0},toggleGrid:t=>{const i=t.getInstanceState().isGridMode;t.updateInstanceState({isGridMode:!i})},toggleHighContrast:()=>{document.body.classList.toggle("high-contrast")},createJiukNote:t=>{const i=t.getViewportScreenCenter(),n=(Math.random()-.5)*20;t.createShape({id:U(),type:"obsidian-note",x:i.x-175+n,y:i.y-200+n,props:{w:350,h:400}})}};function E(t,i){const n=URL.createObjectURL(t),l=document.createElement("a");l.href=n,l.download=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}function B(t,i){return new Promise(n=>{const l=new XMLSerializer().serializeToString(t),o=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(l)))}`,a=new Image;a.onload=()=>{const u=document.createElement("canvas");u.width=a.width,u.height=a.height;const d=u.getContext("2d");if(!d)return n(null);i==="image/jpeg"&&(d.fillStyle="#ffffff",d.fillRect(0,0,u.width,u.height)),d.drawImage(a,0,0),u.toBlob(r=>n(r),i)},a.src=o})}const nt="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cradialGradient%20id='bg-gradient'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(256%20256)%20rotate(90)%20scale(512)'%3e%3cstop%20stop-color='%232e1065'%20/%3e%3cstop%20offset='1'%20stop-color='%2309090b'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='jiuk-gradient'%20x1='80'%20y1='120'%20x2='320'%20y2='420'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0%25'%20stop-color='%23a855f7'%20/%3e%3cstop%20offset='50%25'%20stop-color='%23d946ef'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23fb7185'%20/%3e%3c/linearGradient%3e%3cfilter%20id='glow'%20x='-40%25'%20y='-40%25'%20width='180%25'%20height='180%25'%3e%3cfeGaussianBlur%20stdDeviation='20'%20result='blur'%20/%3e%3cfeComposite%20in='SourceGraphic'%20in2='blur'%20operator='over'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20width='512'%20height='512'%20rx='120'%20fill='url(%23bg-gradient)'%20/%3e%3cg%20stroke='%23a855f7'%20stroke-width='4'%20opacity='0.2'%20stroke-linecap='round'%3e%3cline%20x1='320'%20y1='120'%20x2='420'%20y2='80'%20/%3e%3cline%20x1='320'%20y1='220'%20x2='400'%20y2='220'%20/%3e%3ccircle%20cx='420'%20cy='80'%20r='6'%20fill='%23a855f7'%20/%3e%3c/g%3e%3cpath%20d='M320%20120%20V300%20C320%20366.274%20266.274%20420%20200%20420%20C133.726%20420%2080%20366.274%2080%20300'%20stroke='url(%23jiuk-gradient)'%20stroke-width='60'%20stroke-linecap='round'%20stroke-linejoin='round'%20filter='url(%23glow)'%20/%3e%3ccircle%20cx='320'%20cy='120'%20r='32'%20fill='%23fde047'%20filter='url(%23glow)'/%3e%3ccircle%20cx='200'%20cy='420'%20r='24'%20fill='%23fb7185'%20/%3e%3c/svg%3e",st=J(()=>{const t=D(),i=h.useRef(null),[n,l]=h.useState(!1),[s,o]=h.useState(null),[a,u]=h.useState(32),d=t.getCurrentToolId();h.useEffect(()=>{v.setUiScale(a)},[a]),h.useEffect(()=>{var b;const m=()=>{l(!1),o(null)};return(b=document.querySelector(".tl-canvas"))==null||b.addEventListener("pointerdown",m),()=>{var y;return(y=document.querySelector(".tl-canvas"))==null?void 0:y.removeEventListener("pointerdown",m)}},[]);const r=m=>t.setCurrentTool(m),f=()=>e.jsxs("div",{style:{position:"relative",height:"100%",display:"flex",alignItems:"center"},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx("button",{className:`jiuk-icon-btn ${n?"active":""}`,title:"Menu Principal",style:{padding:4},children:e.jsx("img",{src:nt,alt:"Jiukisidian Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"6px",filter:d==="select"?"none":"grayscale(0.5)"}})}),n&&e.jsxs("div",{className:"jiuk-dropdown-menu",children:[e.jsx("div",{className:"jiuk-menu-label",children:"Exportar"}),e.jsxs("button",{className:"jiuk-menu-item",onClick:()=>v.exportCanvas(t,"png"),children:[e.jsx(R,{size:18})," PNG"]}),e.jsxs("button",{className:"jiuk-menu-item",onClick:()=>v.exportCanvas(t,"pdf"),children:[e.jsx(R,{size:18})," PDF"]}),e.jsxs("button",{className:"jiuk-menu-item",onClick:()=>v.exportCanvas(t,"json"),children:[e.jsx(R,{size:18})," JSON"]}),e.jsx("div",{className:"jiuk-menu-label",children:"AparÃªncia"}),e.jsxs("div",{style:{display:"flex",padding:"0 12px",gap:4},children:[e.jsx("button",{className:"jiuk-menu-item",style:{justifyContent:"center"},title:"Claro",onClick:()=>v.setTheme(t,"light"),children:e.jsx(pe,{size:18})}),e.jsx("button",{className:"jiuk-menu-item",style:{justifyContent:"center"},title:"Escuro",onClick:()=>v.setTheme(t,"dark"),children:e.jsx(xe,{size:18})}),e.jsx("button",{className:"jiuk-menu-item",style:{justifyContent:"center",color:"#a855f7"},title:"Jiuk Mode",onClick:()=>v.setTheme(t,"jiuk"),children:e.jsx(he,{size:18})})]}),e.jsx("div",{className:"jiuk-menu-label",children:"Tamanho UI"}),e.jsxs("div",{style:{display:"flex",padding:"0 12px",gap:4},children:[e.jsx("button",{className:`jiuk-menu-item ${a===24?"active":""}`,style:{justifyContent:"center"},onClick:()=>u(24),children:"P"}),e.jsx("button",{className:`jiuk-menu-item ${a===28?"active":""}`,style:{justifyContent:"center"},onClick:()=>u(28),children:"M"}),e.jsx("button",{className:`jiuk-menu-item ${a===32?"active":""}`,style:{justifyContent:"center"},onClick:()=>u(32),children:"G"})]}),e.jsx("div",{className:"jiuk-separator",style:{width:"100%",height:"1px",margin:"4px 0"}}),e.jsxs("button",{className:"jiuk-menu-item",onClick:()=>window.open("https://ko-fi.com/jiuk","_blank"),children:[e.jsx(ge,{size:18,color:"#fb7185"})," Apoiar o Projeto"]})]})]}),g=({id:m,icon:b,tools:y})=>{const C=d===m||y.some(x=>x.id===d),w=y.find(x=>x.id===d),p=w?w.icon:b;return e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",height:"100%"},onMouseEnter:()=>o(m),onMouseLeave:()=>o(null),children:[e.jsxs("div",{style:{display:"flex",height:"100%",alignItems:"center"},children:[e.jsx("button",{className:`jiuk-icon-btn ${C?"active":""}`,style:{borderRadius:"10px 0 0 10px",paddingRight:4,width:"auto",minWidth:"calc(var(--ui-icon-size) + 12px)",borderRight:"none"},onClick:()=>r(w?w.id:y[0].id),title:m,children:p}),e.jsx("div",{className:`jiuk-icon-btn ${C?"active":""}`,style:{width:20,borderRadius:"0 10px 10px 0",borderLeft:"none",padding:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:.6},children:e.jsx(me,{style:{width:14,height:14}})})]}),s===m&&e.jsx("div",{className:"jiuk-dropdown-menu",style:{minWidth:160},children:y.map(x=>e.jsxs("button",{className:`jiuk-menu-item ${d===x.id?"active":""}`,onClick:()=>{r(x.id),o(null)},children:[L.cloneElement(x.icon,{size:18})," ",e.jsx("span",{style:{marginLeft:8},children:x.label}),d===x.id&&e.jsx(H,{size:16,style:{marginLeft:"auto"}})]},x.id))})]})};return e.jsxs("div",{style:{position:"absolute",top:24,left:"50%",transform:"translateX(-50%)",zIndex:300,display:"flex",gap:"16px",alignItems:"flex-start"},children:[e.jsx("input",{type:"file",ref:i,style:{display:"none"},accept:"image/*",onChange:m=>{var b;return v.handleImageUpload(t,(b=m.target.files)==null?void 0:b[0])}}),e.jsx("div",{className:"jiuk-ui-panel",children:e.jsx(f,{})}),e.jsxs("div",{className:"jiuk-ui-panel",children:[e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>t.undo(),title:"Desfazer",children:e.jsx(Y,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>t.redo(),title:"Refazer",children:e.jsx(_,{})}),e.jsx("div",{className:"jiuk-separator"}),e.jsx("button",{className:"jiuk-icon-btn danger",onClick:()=>t.deleteShapes(t.getSelectedShapeIds()),title:"Deletar",children:e.jsx(z,{})})]}),e.jsxs("div",{className:"jiuk-ui-panel",children:[e.jsx("button",{className:`jiuk-icon-btn ${d==="select"?"active":""}`,onClick:()=>r("select"),title:"Selecionar (V)",children:e.jsx(Z,{})}),e.jsx("button",{className:`jiuk-icon-btn ${d==="hand"?"active":""}`,onClick:()=>r("hand"),title:"Mover (H)",children:e.jsx(Q,{})}),e.jsx("button",{className:`jiuk-icon-btn ${d==="laser"?"active":""}`,onClick:()=>r("laser"),title:"Laser",children:e.jsx(ee,{})}),e.jsx("div",{className:"jiuk-separator"}),e.jsx(g,{id:"draw-group",icon:e.jsx(T,{}),tools:[{id:"draw",label:"Caneta",icon:e.jsx(T,{})},{id:"highlight",label:"Marca-texto",icon:e.jsx(te,{})}]}),e.jsx("button",{className:`jiuk-icon-btn ${d==="eraser"?"active":""}`,onClick:()=>r("eraser"),title:"Borracha (E)",children:e.jsx(ie,{})}),e.jsx("div",{className:"jiuk-separator"}),e.jsx(g,{id:"geo-group",icon:e.jsx(O,{}),tools:[{id:"geo",label:"RetÃ¢ngulo",icon:e.jsx(O,{})},{id:"ellipse",label:"CÃ­rculo",icon:e.jsx(ne,{})},{id:"triangle",label:"TriÃ¢ngulo",icon:e.jsx(se,{})},{id:"diamond",label:"Losango",icon:e.jsx(ae,{})},{id:"star",label:"Estrela",icon:e.jsx(oe,{})}]}),e.jsx("button",{className:`jiuk-icon-btn ${d==="arrow"?"active":""}`,onClick:()=>r("arrow"),title:"Seta",children:e.jsx(re,{})}),e.jsx("button",{className:`jiuk-icon-btn ${d==="line"?"active":""}`,onClick:()=>r("line"),title:"Linha",children:e.jsx($,{style:{transform:"rotate(-45deg)"}})}),e.jsx("div",{className:"jiuk-separator"}),e.jsx("button",{className:`jiuk-icon-btn ${d==="text"?"active":""}`,onClick:()=>r("text"),title:"Texto",children:e.jsx(M,{})}),e.jsx("button",{className:`jiuk-icon-btn ${d==="note"?"active":""}`,onClick:()=>r("note"),title:"Post-it",children:e.jsx(le,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>{var m;return(m=i.current)==null?void 0:m.click()},title:"Imagem",children:e.jsx(ce,{})}),e.jsx("button",{className:`jiuk-icon-btn ${t.getCurrentToolId()==="obsidian-note"?"active":""}`,onClick:()=>v.createJiukNote(t),title:"Jiukisidian Note",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("circle",{cx:"10",cy:"13",r:"2"})]})})]}),e.jsxs("div",{className:"jiuk-ui-panel",children:[e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>t.zoomIn(),title:"Zoom In",children:e.jsx(de,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>t.zoomOut(),title:"Zoom Out",children:e.jsx(ue,{})})]})]})}),at=J(()=>{const t=D(),i=h.useRef(null),[n,l]=h.useState(!1),s=t.getSelectedShapes(),o=s.length>0,a=s.length===1&&s[0].type==="obsidian-note",u=o&&!a&&s.some(c=>["geo","draw"].includes(c.type)),d=o&&!a&&s.some(c=>["geo","line","arrow","draw"].includes(c.type)),r=o&&!a&&s.some(c=>["text","note","geo"].includes(c.type)),f=o&&!a&&s.some(c=>["text","note","geo"].includes(c.type)),g=(c,j=null)=>{if(!a)return;const N=new CustomEvent("jiuk-editor-action",{detail:{id:s[0].id,action:c,value:j}});window.dispatchEvent(N)},m=[{name:"black",hex:"#18181b"},{name:"grey",hex:"#e0e0e0"},{name:"light-violet",hex:"#d8b4fe"},{name:"violet",hex:"#a855f7"},{name:"blue",hex:"#60a5fa"},{name:"light-green",hex:"#4ade80"},{name:"yellow",hex:"#fde047"},{name:"light-red",hex:"#fb7185"},{name:"red",hex:"#dc2626"}],b=[{name:"none",label:"Vazio"},{name:"semi",label:"Semi"},{name:"solid",label:"SÃ³lido"},{name:"pattern",label:"PadrÃ£o"}],y=[{name:"s",label:"P"},{name:"m",label:"M"},{name:"l",label:"G"},{name:"xl",label:"XG"}],C=[{name:"draw",label:"MÃ£o"},{name:"solid",label:"Reto"},{name:"dashed",label:"TraÃ§o"},{name:"dotted",label:"Ponto"}],w=[{name:"draw",label:"Draw"},{name:"sans",label:"Sans"},{name:"serif",label:"Serif"},{name:"mono",label:"Mono"}],p=[{name:"start",icon:e.jsx(I,{})},{name:"middle",icon:e.jsx(A,{})},{name:"end",icon:e.jsx(F,{})},{name:"justify",icon:e.jsx(Ie,{})}],x=["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ¤£","ðŸ˜‚","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Š","ðŸ˜‡","ðŸ¥°","ðŸ˜","ðŸ¤©","ðŸ˜˜","ðŸ˜—","ðŸ˜š","ðŸ˜™","ðŸ˜‹","ðŸ˜›","ðŸ˜œ","ðŸ¤ª","ðŸ˜","ðŸ¤‘","ðŸ¤—","ðŸ¤­","ðŸ¤«","ðŸ¤”","ðŸ¤","ðŸ¤¨","ðŸ˜","ðŸ˜‘","ðŸ˜¶","ðŸ˜","ðŸ˜’","ðŸ™„","ðŸ˜¬","ðŸ¤¥","ðŸ˜Œ","ðŸ˜”","ðŸ˜ª","ðŸ¤¤","ðŸ˜´","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤¢","ðŸ¤®","ðŸ¤§","ðŸ¥µ","ðŸ¥¶","ðŸ¥´","ðŸ˜µ","ðŸ¤¯","ðŸ¤ ","ðŸ¥³","ðŸ˜Ž","ðŸ¤“","ðŸ§","ðŸ˜•","ðŸ˜Ÿ","ðŸ™","ðŸ˜®","ðŸ˜¯","ðŸ˜²","ðŸ˜³","ðŸ¥º","ðŸ˜¦","ðŸ˜§","ðŸ˜¨","ðŸ˜°","ðŸ˜¥","ðŸ˜¢","ðŸ˜­","ðŸ˜±","ðŸ˜–","ðŸ˜£","ðŸ˜ž","ðŸ˜“","ðŸ˜©","ðŸ˜«","ðŸ¥±","ðŸ˜¤","ðŸ˜¡","ðŸ˜ ","ðŸ¤¬","ðŸ˜ˆ","ðŸ‘¿","ðŸ’€","â˜ ï¸","ðŸ’©","ðŸ¤¡","ðŸ‘¹","ðŸ‘º","ðŸ‘»","ðŸ‘½","ðŸ‘¾","ðŸ¤–","ðŸ‘‹","ðŸ¤š","ðŸ–ï¸","âœ‹","ðŸ––","ðŸ‘Œ","ðŸ¤","âœŒï¸","ðŸ¤ž","ðŸ¤Ÿ","ðŸ¤˜","ðŸ¤™","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ–•","ðŸ‘‡","â˜ï¸","ðŸ‘","ðŸ‘Ž","âœŠ","ðŸ‘Š","ðŸ¤›","ðŸ¤œ","ðŸ‘","ðŸ™Œ","ðŸ‘","ðŸ¤²","ðŸ¤","ðŸ™","âœï¸","ðŸ’…","ðŸ¤³","ðŸ’ª","ðŸ§ ","ðŸ¦´","ðŸ‘€","ðŸ‘ï¸","ðŸ‘„","ðŸ’‹","ðŸ’˜","ðŸ’","ðŸ’–","ðŸ’—","ðŸ’“","ðŸ’ž","ðŸ’•","ðŸ’Ÿ","â£ï¸","ðŸ’”","â¤ï¸","ðŸ§¡","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ¤Ž","ðŸ–¤","ðŸ¤","ðŸ’¯","ðŸ’¢","ðŸ’¥","ðŸ’«","ðŸ’¦","ðŸ’¨","ðŸ•³ï¸","ðŸ’£","ðŸ’¬","ðŸ‘ï¸â€ðŸ—¨ï¸","ðŸ—¨ï¸","ðŸ—¯ï¸","ðŸ’­","ðŸ’¤","ðŸ‘‹","ðŸ¤š","ðŸ–ï¸","âœ‹","ðŸ––","ðŸ‘Œ","ðŸ¤"],k=(c,j,N)=>{N.preventDefault(),N.stopPropagation(),o?t.setStyleForSelectedShapes(c,j):t.setStyleForNextShapes(c,j)},S={width:"auto",padding:"0 8px",fontSize:"calc(var(--ui-icon-size) * 0.45)",height:"calc(var(--ui-icon-size) + 4px)",minHeight:"24px"};return e.jsx(je,{nodeRef:i,handle:".drag-handle",defaultPosition:{x:50,y:window.innerHeight-450},children:e.jsxs("div",{ref:i,className:"jiuk-ui-panel",style:{position:"absolute",zIndex:400,flexDirection:"column",alignItems:"flex-start",gap:"12px",padding:"12px",minWidth:"260px"},children:[e.jsx("div",{className:"drag-handle",style:{width:"100%",display:"flex",justifyContent:"center",cursor:"grab",paddingBottom:"8px",borderBottom:"1px solid var(--border)",marginBottom:"4px",color:"var(--text-muted)"},children:e.jsx(fe,{})}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start",width:"100%"},children:[e.jsx(be,{style:{marginTop:6,color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)",height:"var(--ui-icon-size)"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[m.map(c=>e.jsx("button",{onPointerDown:j=>{a?(j.preventDefault(),g("color",c.hex)):k(We,c.name,j)},title:c.name,style:{width:"calc(var(--ui-icon-size) - 4px)",height:"calc(var(--ui-icon-size) - 4px)",borderRadius:"50%",background:c.hex,border:"2px solid var(--border)",cursor:"pointer",padding:0,transition:"transform 0.1s"}},c.name)),a&&e.jsx("div",{style:{position:"relative",width:"calc(var(--ui-icon-size) - 4px)",height:"calc(var(--ui-icon-size) - 4px)",overflow:"hidden",borderRadius:"50%",border:"2px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",background:"conic-gradient(red, yellow, green, cyan, blue, magenta, red)"},children:e.jsx("input",{type:"color",onChange:c=>g("color",c.target.value),style:{position:"absolute",opacity:0,width:"100%",height:"100%",cursor:"pointer"}})})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx(M,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("h1"),title:"TÃ­tulo 1",children:e.jsx(ye,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("h2"),title:"TÃ­tulo 2",children:e.jsx(ke,{})}),e.jsx("div",{className:"jiuk-separator"}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("bold"),title:"Negrito",children:e.jsx(ve,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("italic"),title:"ItÃ¡lico",children:e.jsx(we,{})}),e.jsx("div",{className:"jiuk-separator"}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("list"),title:"Lista",children:e.jsx(Se,{})})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx(I,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("align","left"),children:e.jsx(I,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("align","center"),children:e.jsx(A,{})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:()=>g("align","right"),children:e.jsx(F,{})}),e.jsx("div",{className:"jiuk-separator"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{className:`jiuk-icon-btn ${n?"active":""}`,onClick:()=>l(!n),children:e.jsx(Ce,{})}),n&&e.jsx("div",{className:"jiuk-ui-panel",style:{position:"absolute",bottom:"100%",left:"-40px",marginBottom:"8px",display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"4px",width:"280px",maxHeight:"260px",overflowY:"auto",zIndex:500,padding:"8px",backgroundColor:"var(--bg-surface)",border:"1px solid var(--border)",boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},children:x.map(c=>e.jsx("button",{className:"jiuk-icon-btn",style:{width:"100%",height:"auto",fontSize:"24px",aspectRatio:"1/1"},onClick:()=>{g("emoji",c),l(!1)},children:c},c))})]})]})]})]}),u&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx(Ne,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:b.map(c=>e.jsx("button",{onPointerDown:j=>k(Ge,c.name,j),className:"jiuk-icon-btn",style:S,children:c.label},c.name))})]}),f&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx(I,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:p.map(c=>e.jsx("button",{onPointerDown:j=>k(Je,c.name,j),className:"jiuk-icon-btn",children:c.icon},c.name))})]}),d&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx($,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:C.map(c=>e.jsx("button",{onPointerDown:j=>k(qe,c.name,j),className:"jiuk-icon-btn",style:S,children:c.label},c.name))})]}),!a&&o&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx(Pe,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:y.map(c=>e.jsx("button",{onPointerDown:j=>k(Ve,c.name,j),className:"jiuk-icon-btn",style:S,children:c.label},c.name))})]}),r&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:"100%"},children:[e.jsx(M,{style:{color:"var(--text-muted)",flexShrink:0,width:"var(--ui-icon-size)"}}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:w.map(c=>e.jsx("button",{onPointerDown:j=>k(Xe,c.name,j),className:"jiuk-icon-btn",style:S,children:c.label},c.name))})]})]})})}),ot=({currentProjectId:t,onSelectProject:i,onClose:n})=>{const[l,s]=h.useState([]),[o,a]=h.useState("");h.useEffect(()=>{const r=localStorage.getItem("jiukisidian-projects-index");if(r)s(JSON.parse(r));else{const f={id:"default",name:"Meu Primeiro Projeto",lastModified:Date.now()};s([f]),localStorage.setItem("jiukisidian-projects-index",JSON.stringify([f]))}},[]);const u=()=>{if(!o.trim())return;const r={id:crypto.randomUUID(),name:o,lastModified:Date.now()},f=[...l,r];s(f),localStorage.setItem("jiukisidian-projects-index",JSON.stringify(f)),a(""),i(r.id)},d=(r,f)=>{if(f.stopPropagation(),l.length<=1){alert("VocÃª precisa ter pelo menos um projeto.");return}if(confirm("Tem certeza? Isso apagarÃ¡ este projeto permanentemente.")){const g=l.filter(m=>m.id!==r);s(g),localStorage.setItem("jiukisidian-projects-index",JSON.stringify(g)),localStorage.removeItem(`jiukisidian-data-${r}`),t===r&&i(g[0].id)}};return e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{background:"#18181b",width:"500px",maxHeight:"80vh",borderRadius:"12px",padding:"24px",display:"flex",flexDirection:"column",gap:"20px",border:"1px solid #27272a",boxShadow:"0 20px 50px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{color:"#f4f4f5",margin:0,display:"flex",alignItems:"center",gap:10},children:[e.jsx(ze,{color:"#a855f7"})," Meus Projetos"]}),e.jsx("button",{onClick:n,style:{background:"none",border:"none",color:"#71717a",cursor:"pointer"},children:e.jsx(W,{})})]}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("input",{type:"text",placeholder:"Nome do novo projeto...",value:o,onChange:r=>a(r.target.value),style:{flex:1,background:"#27272a",border:"1px solid #3f3f46",padding:"10px",borderRadius:"6px",color:"white",outline:"none"}}),e.jsx("button",{onClick:u,style:{background:"#a855f7",color:"white",border:"none",padding:"0 16px",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:e.jsx(G,{size:20})})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,overflowY:"auto"},children:l.map(r=>e.jsxs("div",{onClick:()=>i(r.id),style:{padding:"12px",borderRadius:"8px",background:r.id===t?"rgba(168, 85, 247, 0.2)":"#27272a",border:r.id===t?"1px solid #a855f7":"1px solid transparent",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",transition:"0.2s"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:500},children:r.name}),e.jsx("div",{style:{color:"#71717a",fontSize:"12px"},children:new Date(r.lastModified).toLocaleDateString()})]}),r.id!==t&&e.jsx("button",{onClick:f=>d(r.id,f),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",opacity:.6},title:"Deletar Projeto",children:e.jsx(z,{size:18})}),r.id===t&&e.jsx("div",{style:{color:"#a855f7",fontSize:"12px",fontWeight:"bold"},children:"ATIVO"})]},r.id))})]})})},V=".jiukisidian",rt=(t,i)=>{const n=t.store.getSnapshot(),l={version:1,meta:{name:i,date:new Date().toISOString(),app:"jiukisidian"},data:n},s=JSON.stringify(l),o=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(o),u=document.createElement("a");u.href=a,u.download=`${i.replace(/\s+/g,"_")}${V}`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(a)},lt=async(t,i)=>new Promise((n,l)=>{const s=new FileReader;s.onload=o=>{var a;try{const u=(a=o.target)==null?void 0:a.result,d=JSON.parse(u);if(!d.data||!d.meta)throw new Error("Arquivo .jiukisidian invÃ¡lido");i.store.loadSnapshot(d.data),n()}catch(u){console.error(u),l(u)}},s.onerror=()=>l(new Error("Erro ao ler arquivo")),s.readAsText(t)}),ct=[q],dt=({onOpenProjectManager:t})=>{const i=D(),[n,l]=h.useState([]),[s,o]=h.useState(""),[a,u]=h.useState(null),[d,r]=h.useState("");h.useEffect(()=>{const p=()=>{l(i.getPages()),o(i.getCurrentPageId())},x=i.store.listen(p,{scope:"all"});return p(),()=>x()},[i]);const f=()=>{i.createPage({name:"Nova PÃ¡gina"})},g=(p,x)=>{x.stopPropagation(),n.length>1&&i.deletePage(p)},m=(p,x)=>{x.stopPropagation(),u(p.id),r(p.name)},b=p=>{p==null||p.stopPropagation(),u(null),r("")},y=p=>{p==null||p.stopPropagation(),a&&d.trim()!==""&&i.renamePage(a,d),u(null),r("")},C=()=>{rt(i,"Meu Projeto Jiukisidian")},w=()=>{const p=document.createElement("input");p.type="file",p.accept=V,p.onchange=async x=>{var S;const k=(S=x.target.files)==null?void 0:S[0];k&&await lt(k,i)},p.click()};return e.jsxs("div",{style:{position:"absolute",top:24,right:24,zIndex:300,display:"flex",flexDirection:"column",gap:8,alignItems:"flex-end"},children:[e.jsxs("div",{className:"jiuk-ui-panel",style:{flexDirection:"row",display:"flex",gap:"8px",padding:"8px",background:"#18181b",borderRadius:"8px",border:"1px solid #27272a"},children:[e.jsx("button",{className:"jiuk-icon-btn",onClick:t,title:"Gerenciar Projetos",style:{background:"none",border:"none",color:"#f4f4f5",cursor:"pointer"},children:e.jsx(Me,{size:20})}),e.jsx("div",{style:{width:"1px",background:"#27272a",margin:"0 4px"}}),e.jsx("button",{className:"jiuk-icon-btn",onClick:C,title:"Salvar .jiukisidian",style:{background:"none",border:"none",color:"#f4f4f5",cursor:"pointer"},children:e.jsx(Le,{size:20})}),e.jsx("button",{className:"jiuk-icon-btn",onClick:w,title:"Abrir .jiukisidian",style:{background:"none",border:"none",color:"#f4f4f5",cursor:"pointer"},children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"jiuk-ui-panel",style:{flexDirection:"column",alignItems:"stretch",minWidth:"180px",display:"flex",background:"#18181b",borderRadius:"8px",border:"1px solid #27272a",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #27272a",color:"#a1a1aa",fontSize:"11px",fontWeight:700,display:"flex",justifyContent:"space-between",alignItems:"center",letterSpacing:"0.05em"},children:[e.jsxs("span",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx(Oe,{size:14})," PÃGINAS"]}),e.jsx("button",{onClick:f,style:{background:"none",border:"none",color:"#a855f7",cursor:"pointer",padding:0},title:"Nova PÃ¡gina",children:e.jsx(G,{size:16})})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"4px"},children:n.map(p=>e.jsx("div",{onClick:()=>{a!==p.id&&i.setCurrentPage(p.id)},style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 10px",borderRadius:"4px",fontSize:"13px",cursor:"pointer",transition:"0.2s",background:p.id===s?"rgba(168, 85, 247, 0.15)":"transparent",color:p.id===s?"#d8b4fe":"#d4d4d8",border:p.id===s?"1px solid rgba(168, 85, 247, 0.2)":"1px solid transparent"},children:a===p.id?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,width:"100%"},children:[e.jsx("input",{autoFocus:!0,value:d,onChange:x=>r(x.target.value),onKeyDown:x=>{x.key==="Enter"&&y(),x.key==="Escape"&&b()},onClick:x=>x.stopPropagation(),style:{background:"#27272a",border:"1px solid #a855f7",color:"white",borderRadius:"4px",padding:"2px 4px",width:"100%",fontSize:"12px",outline:"none"}}),e.jsx("button",{onClick:y,style:{background:"none",border:"none",color:"#22c55e",cursor:"pointer",padding:0},children:e.jsx(H,{size:14})}),e.jsx("button",{onClick:b,style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:0},children:e.jsx(W,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.name}),e.jsxs("div",{style:{display:"flex",gap:4,opacity:p.id===s?1:.4},children:[e.jsx("button",{onClick:x=>m(p,x),style:{background:"none",border:"none",color:"inherit",cursor:"pointer",padding:2},title:"Renomear",children:e.jsx(Ae,{size:12})}),n.length>1&&e.jsx("button",{onClick:x=>g(p.id,x),style:{background:"none",border:"none",color:"inherit",cursor:"pointer",padding:2},title:"Deletar",children:e.jsx(z,{size:12})})]})]})},p.id))})]})]})},ut={maxPages:50};class pt extends L.Component{constructor(n){super(n);P(this,"handleHardReset",()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,l){console.error(n),this.setState({error:n,errorInfo:l})}render(){var n;return this.state.hasError?e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"#09090b",color:"#f4f4f5",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:e.jsxs("div",{style:{maxWidth:"500px",background:"#18181b",padding:"32px",borderRadius:"16px",border:"1px solid #27272a",textAlign:"center"},children:[e.jsx(De,{size:48,color:"#ef4444",style:{marginBottom:"16px"}}),e.jsx("h2",{style:{fontSize:"20px",marginBottom:"8px"},children:"Erro de Sistema Detectado"}),e.jsx("p",{style:{fontSize:"12px",color:"#fb7185",fontFamily:"monospace",marginBottom:"20px",wordBreak:"break-all"},children:((n=this.state.error)==null?void 0:n.message)||"Erro desconhecido"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsxs("button",{onClick:this.handleHardReset,style:{display:"flex",alignItems:"center",gap:8,padding:"10px 20px",background:"#ef4444",border:"none",borderRadius:"6px",color:"white",fontWeight:"bold",cursor:"pointer"},children:[e.jsx(z,{size:16})," Limpar Dados Corrompidos"]}),e.jsxs("button",{onClick:()=>window.location.reload(),style:{display:"flex",alignItems:"center",gap:8,padding:"10px 20px",background:"#3f3f46",border:"none",borderRadius:"6px",color:"white",fontWeight:"bold",cursor:"pointer"},children:[e.jsx(Re,{size:16})," Tentar Recarregar"]})]})]})}):this.props.children}}function xt(){const[t,i]=h.useState("default"),[n,l]=h.useState(!1),[s,o]=h.useState(!1);h.useEffect(()=>{const d=localStorage.getItem("jiukisidian-last-project-id");d&&i(d)},[]);const a=d=>{o(!0),l(!1),setTimeout(()=>{localStorage.setItem("jiukisidian-last-project-id",d),i(d),o(!1)},500)},u=h.useMemo(()=>({Toolbar:null,MainMenu:null,PageMenu:null,HelpMenu:null,DebugMenu:null,NavigationPanel:null}),[]);return e.jsx("div",{style:{position:"fixed",inset:0,overflow:"hidden",background:"#09090b"},children:e.jsxs(pt,{children:[s?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#a855f7",gap:16},children:[e.jsx(Ee,{size:48,className:"animate-spin"}),e.jsx("span",{style:{fontFamily:"Inter",color:"#f4f4f5"},children:"Carregando Projeto..."}),e.jsx("style",{children:"@keyframes animate-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } } .animate-spin { animation: animate-spin 1s linear infinite; }"})]}):e.jsxs(Ke,{persistenceKey:`jiukisidian-v8-fix-${t}`,shapeUtils:ct,options:ut,hideUi:!1,components:u,children:[e.jsx(st,{}),e.jsx(at,{}),e.jsx(dt,{onOpenProjectManager:()=>l(!0)})]}),n&&e.jsx(ot,{currentProjectId:t,onSelectProject:a,onClose:()=>l(!1)})]})})}Fe.createRoot(document.getElementById("root")).render(e.jsx(L.StrictMode,{children:e.jsx(xt,{})}));
